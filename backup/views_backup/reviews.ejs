<%- include('layout', { body: `
<!-- Hero Section -->
<section class="huella-hero">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="huella-fade-in">Avaliações dos Clientes</h1>
                <p class="lead huella-fade-in">Veja o que os nossos clientes dizem sobre os nossos cookies. Mais de ${stats.totalReviews} avaliações e uma média de ${stats.averageRating} estrelas!</p>
            </div>
            <div class="col-lg-6 text-center">
                <img src="/img/reviews/reviews-hero.jpg" alt="Avaliações Huella" class="img-fluid huella-fade-in" style="max-height: 400px;">
            </div>
        </div>
    </div>
</section>

<!-- Stats Overview -->
<section class="huella-section">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="huella-title">Resumo das Avaliações</h2>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card huella-card text-center">
                    <div class="card-body">
                        <div class="mb-3">
                            <i class="fas fa-star fa-3x text-huella-yellow"></i>
                        </div>
                        <h3 class="fw-bold text-huella-orange">${stats.averageRating}</h3>
                        <p class="card-text">Avaliação Média</p>
                        <div class="mb-2">
                            ${Array(5).fill(0).map((_, i) => `
                                <i class="fas fa-star ${i < Math.floor(stats.averageRating) ? 'text-huella-yellow' : 'text-muted'}"></i>
                            `).join('')}
                        </div>
                        <small class="text-muted">Baseado em ${stats.totalReviews} avaliações</small>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card huella-card text-center">
                    <div class="card-body">
                        <div class="mb-3">
                            <i class="fas fa-thumbs-up fa-3x text-huella-green"></i>
                        </div>
                        <h3 class="fw-bold text-huella-orange">${stats.fiveStar}%</h3>
                        <p class="card-text">Avaliações 5 Estrelas</p>
                        <div class="progress mb-2" style="height: 8px;">
                            <div class="progress-bar bg-huella-yellow" style="width: ${stats.fiveStar}%"></div>
                        </div>
                        <small class="text-muted">${stats.fiveStar}% dos clientes</small>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card huella-card text-center">
                    <div class="card-body">
                        <div class="mb-3">
                            <i class="fas fa-heart fa-3x text-huella-orange"></i>
                        </div>
                        <h3 class="fw-bold text-huella-orange">${stats.totalReviews}</h3>
                        <p class="card-text">Total de Avaliações</p>
                        <div class="mb-2">
                            <i class="fas fa-users text-huella-green me-2"></i>
                            <span>Clientes Satisfeitos</span>
                        </div>
                        <small class="text-muted">E a crescer todos os dias!</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Rating Breakdown -->
<section class="huella-section huella-section-alt">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="huella-title">Distribuição das Avaliações</h2>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="huella-card">
                    <div class="card-body">
                        ${[5, 4, 3, 2, 1].map(rating => {
                            const percentage = stats[`${rating}Star`] || 0;
                            return `
                            <div class="d-flex align-items-center mb-3">
                                <div class="me-3">
                                    <span class="fw-bold">${rating}</span>
                                    <i class="fas fa-star text-huella-yellow ms-1"></i>
                                </div>
                                <div class="flex-grow-1 me-3">
                                    <div class="progress" style="height: 20px;">
                                        <div class="progress-bar bg-huella-yellow" style="width: ${percentage}%"></div>
                                    </div>
                                </div>
                                <div class="text-end" style="min-width: 50px;">
                                    <span class="fw-bold">${percentage}%</span>
                                </div>
                            </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Reviews -->
<section class="huella-section">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="huella-title">Avaliações em Destaque</h2>
                <p class="huella-text">Algumas das nossas avaliações mais recentes e detalhadas</p>
            </div>
        </div>
        <div class="row">
            ${featuredReviews.map(review => `
            <div class="col-lg-6 col-md-6 mb-4">
                <div class="card huella-card h-100">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <div>
                                <h6 class="card-title mb-1">${review.name}</h6>
                                <small class="text-muted">${new Date(review.date).toLocaleDateString('pt-PT')}</small>
                            </div>
                            <div>
                                ${Array(5).fill(0).map((_, i) => `
                                    <i class="fas fa-star ${i < review.rating ? 'text-huella-yellow' : 'text-muted'}"></i>
                                `).join('')}
                                ${review.verified ? '<span class="badge bg-success ms-2">Verificado</span>' : ''}
                            </div>
                        </div>
                        <p class="card-text">"${review.comment}"</p>
                        ${review.cookie ? `
                        <div class="mt-3">
                            <small class="text-huella-orange">
                                <i class="fas fa-cookie-bite me-1"></i>
                                Produto: ${review.cookie}
                            </small>
                        </div>
                        ` : ''}
                    </div>
                </div>
            </div>
            `).join('')}
        </div>
    </div>
</section>

<!-- Recent Reviews -->
<section class="huella-section huella-section-green">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="text-white">Avaliações Recentes</h2>
                <p class="text-white-50">O que os nossos clientes mais recentes dizem</p>
            </div>
        </div>
        <div class="row">
            ${recentReviews.map(review => `
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card huella-card h-100">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <div>
                                <h6 class="card-title mb-1">${review.name}</h6>
                                <small class="text-muted">${new Date(review.date).toLocaleDateString('pt-PT')}</small>
                            </div>
                            <div>
                                ${Array(5).fill(0).map((_, i) => `
                                    <i class="fas fa-star ${i < review.rating ? 'text-huella-yellow' : 'text-muted'}"></i>
                                `).join('')}
                                ${review.verified ? '<span class="badge bg-success ms-2">Verificado</span>' : ''}
                            </div>
                        </div>
                        <p class="card-text">"${review.comment}"</p>
                    </div>
                </div>
            </div>
            `).join('')}
        </div>
    </div>
</section>

<!-- Leave Review CTA -->
<section class="huella-section huella-section-alt">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 text-center">
                <h2 class="huella-title">Partilhe a Sua Experiência</h2>
                <p class="huella-text mb-4">Já provou os nossos cookies? Adoraríamos saber o que pensa! A sua opinião ajuda outros clientes e a nós a melhorar.</p>
                <div class="d-flex gap-3 justify-content-center">
                    <a href="/loja" class="btn btn-huella-primary btn-lg">
                        <i class="fas fa-shopping-cart me-2"></i>Encomendar Agora
                    </a>
                    <a href="/contactos" class="btn btn-huella-outline btn-lg">
                        <i class="fas fa-star me-2"></i>Deixar Avaliação
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Social Proof -->
<section class="huella-section">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="huella-title">Onde Somos Mencionados</h2>
                <p class="huella-text">Veja o que dizem sobre nós na imprensa e redes sociais</p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card huella-card h-100 text-center">
                    <div class="card-body">
                        <div class="mb-3">
                            <i class="fas fa-newspaper fa-3x text-huella-orange"></i>
                        </div>
                        <h5 class="card-title">Time Out Lisboa</h5>
                        <p class="card-text">"Os melhores cookies artesanais de Lisboa"</p>
                        <div class="mb-3">
                            ${Array(5).fill(0).map(() => '<i class="fas fa-star text-huella-yellow"></i>').join('')}
                        </div>
                        <a href="#" class="btn btn-huella-outline">Ler Artigo</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card huella-card h-100 text-center">
                    <div class="card-body">
                        <div class="mb-3">
                            <i class="fas fa-tv fa-3x text-huella-orange"></i>
                        </div>
                        <h5 class="card-title">RTP1</h5>
                        <p class="card-text">"Inovação e sustentabilidade na doçaria portuguesa"</p>
                        <div class="mb-3">
                            ${Array(5).fill(0).map(() => '<i class="fas fa-star text-huella-yellow"></i>').join('')}
                        </div>
                        <a href="#" class="btn btn-huella-outline">Ver Reportagem</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card huella-card h-100 text-center">
                    <div class="card-body">
                        <div class="mb-3">
                            <i class="fas fa-blog fa-3x text-huella-orange"></i>
                        </div>
                        <h5 class="card-title">Blog de Culinária</h5>
                        <p class="card-text">"Uma experiência única para os sentidos"</p>
                        <div class="mb-3">
                            ${Array(5).fill(0).map(() => '<i class="fas fa-star text-huella-yellow"></i>').join('')}
                        </div>
                        <a href="#" class="btn btn-huella-outline">Ler Review</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="huella-section huella-section-orange">
    <div class="container">
        <div class="row justify-content-center text-center">
            <div class="col-lg-8">
                <h2 class="text-white mb-3">Junte-se aos Nossos Clientes Satisfeitos</h2>
                <p class="text-white-50 mb-4">Descubra por si próprio por que tantas pessoas adoram os nossos cookies.</p>
                <div class="d-flex gap-3 justify-content-center">
                    <a href="/loja" class="btn btn-light btn-lg">
                        <i class="fas fa-shopping-cart me-2"></i>Encomendar Agora
                    </a>
                    <a href="/cookies" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-cookie-bite me-2"></i>Ver Sabores
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
` }) %>

